// const todos = [
//   { id: 0, userId: 6914, title: 'dot-com Fresh Throughway', completed: true },
//   { id: 1, userId: 66312, title: 'optimize Gorgeous Plastic Shirt Gorgeous Fresh Cheese', completed: true },
//   { id: 2, userId: 91885, title: 'override Village Awesome Metal Fish', completed: true },
//   { id: 3, userId: 5871, title: 'Product Michigan harness Small Guinea Franc', completed: true },
//   { id: 4, userId: 65099, title: 'generate Investment Account', completed: false },
//   { id: 5, userId: 41485, title: 'Extensions override Facilitator structure', completed: false },
//   { id: 6, userId: 99477, title: 'Grocery Home Direct Wooden', completed: true },
//   { id: 7, userId: 81122, title: 'deposit Vermont Reverse-engineered', completed: false },
//   { id: 8, userId: 65157, title: 'Alaska grid-enabled', completed: true },
//   { id: 9, userId: 82677, title: 'Tasty Concrete Ball Toys AGP', completed: false },
//   { id: 10, userId: 58373, title: 'Aruba superstructure Philippines', completed: true },
//   { id: 11, userId: 74060, title: 'copy', completed: false },
//   { id: 12, userId: 44046, title: 'New Hampshire GB Plain Ways', completed: false },
//   { id: 13, userId: 29332, title: 'PNG', completed: true },
//   { id: 14, userId: 37351, title: 'Ball', completed: false },
//   { id: 15, userId: 40302, title: 'Internal Metrics Personal Loan Account Garden', completed: true },
//   { id: 16, userId: 42525, title: 'International Ball innovative navigating cross-platform', completed: true },
//   { id: 17, userId: 4278, title: 'Tuna microchip Direct compressing Industrial', completed: false },
//   { id: 18, userId: 48928, title: 'Georgia withdrawal Automated', completed: false },
//   { id: 19, userId: 93129, title: 'index Practical', completed: true },
//   { id: 20, userId: 72478, title: 'convergence Table Tasty Health Enhanced', completed: false },
//   { id: 21, userId: 13052, title: 'Administrator Refined Steel Ball purple cohesive', completed: false },
//   { id: 22, userId: 58397, title: 'AGP Ports North Carolina', completed: false },
//   { id: 23, userId: 75108, title: 'Alabama', completed: false },
//   { id: 24, userId: 41270, title: 'bus partnerships Human hard drive interface', completed: false },
//   { id: 25, userId: 43367, title: 'index Malaysia projection SAS', completed: true },
//   { id: 26, userId: 13001, title: 'override Incredible Plastic Sausages Branding', completed: false },
//   { id: 27, userId: 49340, title: 'Jewelery zero defect holistic Fresh', completed: false },
//   { id: 28, userId: 10102, title: 'monitoring Russian Ruble deliverables', completed: true },
//   { id: 29, userId: 82905, title: 'navigate open-source Home Loan Account', completed: false },
//   { id: 30, userId: 9140, title: 'Program', completed: true },
//   { id: 31, userId: 93013, title: 'Hat', completed: true },
//   { id: 32, userId: 42890, title: 'multi-byte Idaho mint green red Organic', completed: false },
//   { id: 33, userId: 71143, title: 'Stand-alone Consultant heuristic copy', completed: false },
//   { id: 34, userId: 7766, title: 'Sleek Concrete Shirt generate deposit', completed: true },
//   { id: 35, userId: 49274, title: 'matrix', completed: false },
//   { id: 36, userId: 14988, title: 'mindshare Handmade Granite Fish Automotive', completed: true },
//   { id: 37, userId: 6437, title: 'system', completed: true },
//   { id: 38, userId: 31370, title: 'Accounts Fantastic Cotton Salad invoice Applications', completed: true },
//   { id: 39, userId: 15743, title: 'database Wooden New York Cambridgeshire', completed: true },
//   { id: 40, userId: 10858, title: 'Holy See (Vatican City State) Manager SDD', completed: true },
//   { id: 41, userId: 79541, title: 'system engine action-items Palestinian Territory Health', completed: true },
//   { id: 42, userId: 89995, title: 'tangible deposit Grass-roots Illinois Fantastic', completed: true },
//   { id: 43, userId: 33059, title: 'Executive Handcrafted e-business success', completed: false },
//   { id: 44, userId: 61297, title: 'asymmetric Computer synergize XML Specialist', completed: true },
//   { id: 45, userId: 91134, title: 'Health B2C', completed: true },
//   { id: 46, userId: 77598, title: 'California Unbranded Fresh Hat', completed: true },
//   { id: 47, userId: 97247, title: 'multi-byte XSS Indiana', completed: true },
//   { id: 48, userId: 81143, title: 'Utah Switchable Checking Account Cheese Executive', completed: false },
//   { id: 49, userId: 26275, title: 'Cheese', completed: true },
//   { id: 50, userId: 18624, title: 'orchestration', completed: false },
//   { id: 51, userId: 51534, title: 'Berkshire optical Plastic Virtual', completed: false },
//   { id: 52, userId: 52877, title: 'copying Shores Salad functionalities', completed: false },
//   { id: 53, userId: 58223, title: 'Afghanistan Innovative Mission Representative New Jersey', completed: false },
//   { id: 54, userId: 94171, title: 'Tasty Concrete Shoes Investment Account', completed: true },
//   { id: 55, userId: 48522, title: 'Kenyan Shilling', completed: true },
//   { id: 56, userId: 51600, title: 'GB Direct', completed: true },
//   { id: 57, userId: 83504, title: 'online Consultant Belize Dollar Developer', completed: false },
//   { id: 58, userId: 55651, title: 'Toys copy transmitter Berkshire Gibraltar Pound', completed: false },
//   { id: 59, userId: 95837, title: 'local area network system', completed: true },
//   { id: 60, userId: 95820, title: 'portals Tools', completed: true },
//   { id: 61, userId: 75744, title: 'District', completed: true },
//   { id: 62, userId: 15625, title: 'Valleys Georgia Avon', completed: false },
//   { id: 63, userId: 19005, title: 'withdrawal Belize Dollar', completed: false },
//   { id: 64, userId: 65045, title: 'protocol Vermont Ball Future', completed: false },
//   { id: 65, userId: 56042, title: 'Oklahoma', completed: true },
//   { id: 66, userId: 64630, title: 'Shirt maximize Metrics', completed: false },
//   { id: 67, userId: 17472, title: 'FTP Orchestrator Automotive Gold', completed: true },
//   { id: 68, userId: 57091, title: 'generating Creative Integration Virtual', completed: false },
//   { id: 69, userId: 18198, title: 'Optimized distributed', completed: true },
//   { id: 70, userId: 88013, title: 'TCP Shoes zero administration', completed: true },
//   { id: 71, userId: 98262, title: 'Granite interfaces', completed: false },
//   { id: 72, userId: 75097, title: 'Chief distributed copying', completed: true },
//   { id: 73, userId: 29040, title: 'Credit Card Account Cambridgeshire Vision-oriented', completed: false },
//   { id: 74, userId: 85132, title: 'Handmade', completed: true },
//   { id: 75, userId: 73950, title: 'Delaware Investment Account backing up RSS Consultant', completed: true },
//   { id: 76, userId: 4439, title: 'relationships Cotton Kids mobile hard drive', completed: false },
//   {
//     id: 77,
//     userId: 3294,
//     title: 'Codes specifically reserved for testing purposes connecting Robust Representative invoice',
//     completed: false,
//   },
//   { id: 78, userId: 52002, title: 'purple Home', completed: false },
//   { id: 79, userId: 86832, title: 'optimize Central array compressing Rustic Metal Keyboard', completed: true },
//   { id: 80, userId: 28364, title: 'Corporate Salad Missouri SSL granular', completed: false },
//   { id: 81, userId: 68991, title: 'Center Division Facilitator', completed: true },
//   { id: 82, userId: 82831, title: 'connecting open-source Managed', completed: false },
//   { id: 83, userId: 93941, title: 'Solutions stable 1080p invoice sensor', completed: true },
//   { id: 84, userId: 13516, title: 'EXE', completed: true },
//   { id: 85, userId: 46528, title: 'plug-and-play PCI synergy strategic bypass', completed: false },
//   { id: 86, userId: 64540, title: 'Buckinghamshire application parallelism Computer overriding', completed: true },
//   { id: 87, userId: 66483, title: 'Kwanza Mobility', completed: false },
//   { id: 88, userId: 87683, title: 'payment maroon', completed: true },
//   { id: 89, userId: 46193, title: 'Functionality algorithm', completed: true },
//   { id: 90, userId: 26828, title: 'pixel Cape Verde Escudo one-to-one', completed: false },
//   { id: 91, userId: 30754, title: 'adapter deliverables killer even-keeled', completed: true },
//   { id: 92, userId: 66390, title: 'Multi-lateral Vermont Tools Bedfordshire', completed: false },
//   { id: 93, userId: 11845, title: 'cross-platform Guinea-Bissau copying Practical', completed: true },
//   { id: 94, userId: 70021, title: 'Uganda Shilling deposit synthesize Cross-group', completed: false },
//   { id: 95, userId: 73733, title: 'Implementation Meadows Ouguiya withdrawal', completed: false },
//   { id: 96, userId: 27207, title: 'CFA Franc BEAC azure', completed: false },
//   { id: 97, userId: 32221, title: 'Balanced front-end card Hawaii Accountability', completed: true },
//   { id: 98, userId: 30476, title: 'Togo', completed: false },
//   { id: 99, userId: 45059, title: 'Money Market Account', completed: false },
// ];

// const app = new Vue({
//   el: '#root',
//   data: {
//     firstName: 'Dmtriy',
//     lastName: 'Malakhov',
//     datetime: new Date().toISOString(),
//     todosList: todos,
//   },
//   methods: {
//     handleClick(id) {
//       console.log('Clicked on item', id);
//     },
//   },
//   computed: {
//     notEmptyNames() {
//       return this.lastName.trim().length !== 0 && this.firstName.trim().length !== 0;
//     },
//   },
//   mounted() {
//     console.log('App started');
//   },
// });

const BASE_URL = 'https://mock-api-builder.vercel.app/api/schema/get';

Vue.component('add-search', {
  props: ['searchGoods'],
  template: 
    `<div data-id="cart">
      <input type="search" placeholder="Search" 
        v-bind:value="searchGoods"
        v-on:input="$emit('input', $event.target.value)"
      >
      <button @click="callback($event)">Search</button>
    </div>`,
  methods: {
    callback: function(e) {
      this.$emit('click', e);
    }
  }   
});

Vue.component('cart-part',{
  template:`
    <div data-id="cart" v-if="showCart">
      <div class="goods-item" v-for="id in cartItems">
          <h3>{{id.productName}}</h3>
          <span>{{id.price}}$</span>
          <span>there are {{id.quantity}} of this items in the cart</span>
          <button @click="callback($event)">remove from cart 🛒</button>
      </div>
  </div>`,
  methods: {
    callback: function(e) {
      this.$emit('click', e);
    }    
  }
})

const app = new Vue({
  el: '#root',
  data: {
    showCart: false,
    cartItems: [],
    goods: [],
    searchGoods: '',
    errorMessage: '',
    filteredGoods: [],
  },
  methods: {
    isVisibleCart() {
      this.showCart = !this.showCart;
    },
    getGoods() {
      fetch(`${BASE_URL}/602c166a89c4a60009ef7046`)
        .then(r => r.json())
        .then(r => {
          this.goods = r;
          this.filteredGoods = this.goods;
        })
        .catch(e => {
          this.errorMessage = e;
        });
    },
    filterGoods() {
      if (!this.goods.length) this.filteredGoods = [];
      if (!this.searchGoods) this.filteredGoods = this.goods;
      this.filteredGoods = this.goods.filter(i => i.productName.toLowerCase().includes(this.searchGoods.toLowerCase()));
    },
    addToCart(item) {
      let existant = false;
      for (const goodsItem of this.cartItems) {
        if (goodsItem.id === item.id) {
          existant = true;
          goodsItem.quantity += 1;
        }
      }
      if (!existant) {
        this.cartItems.push({ ...item, quantity: 1 });
      }
    },
    removeFromCart(id) {
      let index = this.cartItems.indexOf(id);
      if (index > -1) {
        this.cartItems.splice(index, 1);
      }
    },
  },
  mounted() {
    this.getGoods();
  },
});
